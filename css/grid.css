/* ==========================================================================
   Grid Game Main Styles - OPTIMIZED VERSION
   Enhanced with mobile responsiveness and structural improvements
   
CONTENTS:
   1. CSS Variables & Color Theme
   2. Base Layout & Game Container
   3. Grid Container & Responsive Sizing
   4. Grid Cells & Visual States
   5. Beach Cells & Island Styling
   6. Snake Pieces & Animations
   7. Sea Icons & Tooltips
   8. Word Completion Features
   9. Triangular Controller
   10. Phrase Display
   11. Menu System
   12. Erosion Effects
   13. Mobile Optimizations
   14. Hover Effects (Desktop Only)
   15. Animation Performance & GPU Acceleration
   16. Utility Classes & Cleanup
   17. Print Styles (Optional)
   18. Shakespeare Response Components
   19. Shakespeare Welcome and Response Modals
   
   ========================================================================== */

/* ==========================================================================
   1. CSS Variables & Color Theme
   ========================================================================== */
:root {
  /* Island Theme Primary Colors */
  --lightblue: #64C0EB;
  --defaultblue: #56A5D6;
  --maingreen: #61E7A7;
  --startgreen: #19C773;
  --sandyellow: #F6EC74;
  
  /* Derived/Secondary Colors */
  --defaultblue-dark: #4A91BB;
  --defaultblue-darker: #3A82AD;
  --defaultblue-darkest: #2E6C94;
  --defaultblue-light: #78C9EF;
  --defaultblue-lightest: #AEE4F8;
  --maingreen-dark: #4BC98A;
  --maingreen-light: #7DEEB6;
  --maingreen-lighter: #8CEFC0;
  
  /* Text and UI Colors */
  --text-dark: #004d40;
  --box-shadow-color: rgba(0, 77, 64, 0.4);
  
  /* Button Metallic Theme */
  --btn-metal-light: #e8e8e8;
  --btn-metal-medium: #d5d5d5;
  --btn-metal-mediumlight: #dfdfdf;
  --btn-metal-lighter: #f0f0f0;
  --btn-metal-dark: #b8b8b8;
  --btn-metal-darker: #a0a0a0;
  --btn-metal-mediumdark: #c8c8c8;
  --btn-metal-border: #b8b8b8;
  --btn-metal-shadow: rgba(0, 0, 0, 0.25);
  --btn-metal-inner-highlight: rgba(255, 255, 255, 0.6);
  --btn-metal-inner-shadow: rgba(0, 0, 0, 0.2);
  --btn-text-color: #444;
  --btn-text-shadow-light: rgba(255, 255, 255, 0.8);
  --btn-text-shadow-dark: rgba(0, 0, 0, 0.2);
  --btn-text-hover: #222;
  --btn-text-active: #000;
  --btn-text-shadow-pressed-light: rgba(255, 255, 255, 0.3);
  --btn-text-shadow-pressed-dark: rgba(0, 0, 0, 0.5);
  
  /* Box Styling */
  --box-bg-color: #f9f9f9;
  --box-border-color: #ddd;
  
  /* Dynamic Mobile Properties */
  --mobile-cell-size: 35px;
  --mobile-gap-size: 2px;
}

/* ==========================================================================
   2. Base Layout & Game Container
   ========================================================================== */
body {
  font-family: 'Trebuchet MS', Arial, sans-serif;
  margin: 0;
  padding: 0;
  background-color: #f5f5f5;
  color: #333;
  overflow-x: hidden;
}

.game-container {
  max-width: 890px;
  margin: 0 auto;
  padding: 10px 20px 20px 20px;
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
}

/* Hide removed elements */
.game-title,
#game-info {
  display: none;
}

/* ==========================================================================
   3. Grid Container & Responsive Sizing
   ========================================================================== */

/* Grid container wrapper */
.grid-container-wrapper,
#grid-container {
  width: 100%;
  margin: 0;
  position: relative;
  display: flex;
  justify-content: center;
}

#grid-container {
  min-height: 450px;
}

/* Enhanced grid container with GPU acceleration */
.grid-container {
  display: grid;
  gap: 2px;
  background-color: var(--defaultblue);
  border: 2px solid var(--defaultblue-dark);
  border-radius: 4px;
  padding: 2px;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  position: relative;
  margin: 0 auto;
  width: fit-content;
  height: fit-content;
  
  /* Enhanced touch behaviors */
  touch-action: none !important;
  user-select: none;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  -webkit-tap-highlight-color: transparent;
  
  /* GPU acceleration */
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
  perspective: 1000px;
  -webkit-perspective: 1000px;
  
  /* Transition properties */
  transition-property: transform;
  transition-timing-function: cubic-bezier(0.2, 0.0, 0.1, 1.0);
  transition-duration: 0ms;
  z-index: 10;
}

/* Grid sizing for desktop */
.grid-container[data-grid-size="desktop"] {
  grid-template-columns: repeat(15, 45px);
  grid-template-rows: repeat(11, 45px);
}

/* MOBILE RESPONSIVE GRID SIZING */
.grid-container[data-grid-size="mobile"] {
  /* Dynamic sizing based on screen width */
  grid-template-columns: repeat(9, var(--mobile-cell-size));
  grid-template-rows: repeat(9, var(--mobile-cell-size));
  gap: var(--mobile-gap-size);
  
  /* Responsive container sizing */
  max-width: calc(100vw - 40px);
  width: 100%;
  aspect-ratio: 1;
}

/* Scroll transition classes */
.grid-container.fast-scroll {
  transition-duration: 220ms !important;
}

.grid-container.slow-scroll {
  transition-duration: 350ms !important;
}

/* ==========================================================================
   4. Grid Cells & Visual States
   ========================================================================== */

/* Base cell styling */
.grid-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--defaultblue);
  color: transparent;
  border: 1px solid var(--defaultblue-dark);
  border-radius: 4px;
  font-family: 'Trebuchet MS', Arial, sans-serif;
  font-weight: bold;
  font-size: clamp(1rem, 2.5vw, 1.4rem);
  user-select: none;
  box-sizing: border-box;
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  pointer-events: auto;
  margin: 0;
  overflow: hidden;
  position: relative !important;
  z-index: 1;
  
  /* GPU acceleration */
  transform: translateZ(0);
  backface-visibility: hidden;
  transition: none;
}

/* Letter cells - green islands */
.grid-cell.path-cell {
  background-color: var(--maingreen) !important;
  color: var(--text-dark) !important;
  border: 1px solid var(--maingreen-dark) !important;
  text-shadow: 0px 1px 1px rgba(255, 255, 255, 0.8) !important;
}

/* Start cell styling */
.grid-cell.start-cell {
  background-color: var(--startgreen) !important;
  color: var(--text-dark) !important;
  font-weight: bold !important;
  box-shadow: 0 0 5px var(--box-shadow-color) !important;
  z-index: 3 !important;
}

.grid-cell.start-cell.selected-cell {
  background-color: var(--maingreen) !important;
  border-color: var(--startgreen) !important;
  box-shadow: 0 0 6px rgba(0, 77, 64, 0.5) !important;
}

/* Start cell flashing animation */
@keyframes start-cell-flash {
  0% { 
    background-color: var(--startgreen) !important;
    opacity: 1;
  }
  50% { 
    background-color: var(--maingreen) !important;
    opacity: 0.5 !important;
    transform: scale(1.05) !important;
  }
  100% { 
    background-color: var(--startgreen) !important;
    opacity: 1;
  }
}

.grid-cell.start-cell.flash-unselected {
  animation: start-cell-flash 1s infinite ease-in-out;
}

.grid-cell.start-cell.selected-cell {
  animation: none !important;
}

/* Selected cell styling */
.grid-cell.selected-cell {
  background-color: var(--maingreen) !important;
  color: var(--text-dark) !important;
  border: 2px solid var(--maingreen-dark) !important;
  text-shadow: 0px 1px 1px rgba(255, 255, 255, 0.8) !important;
  z-index: 6 !important;
}

/* Completed path styling */
.grid-cell.completed-cell {
  background-color: var(--maingreen) !important;
  border-color: var(--maingreen-dark) !important;
  color: var(--text-dark) !important;
  border: 1px solid var(--maingreen-dark) !important;
  text-shadow: 0px 1px 1px rgba(255, 255, 255, 0.8) !important;
  z-index: 7 !important;
}

.grid-cell.correct-path {
  background-color: var(--maingreen) !important;
  border-color: var(--maingreen-dark) !important;
}

/* Revealed hint cells */
.grid-cell.revealed-cell {
  background-color: #ffcdd2 !important;
  border: 1px solid #e57373 !important;
  color: #d32f2f !important;
  box-shadow: inset 0 0 5px rgba(211, 47, 47, 0.3) !important;
  text-shadow: none !important;
  z-index: 4 !important;
}

/* Out of bounds cells */
.grid-cell.out-of-bounds {
  background-color: var(--defaultblue-darker);
  color: transparent;
  border-color: var(--defaultblue-darkest);
}

/* Touch feedback */
.grid-cell.touch-active {
  box-shadow: 0 0 8px rgba(33, 150, 243, 0.5) !important;
  border-color: #0D47A1 !important;
  transition: box-shadow 0.1s ease, border-color 0.1s ease;
}

/* Invalid selection animation */
@keyframes invalid-selection-pulse {
  0% { background-color: #f0f0f0; border-color: #ccc; }
  50% { background-color: #ff6b6b; border-color: #d32f2f; }
  100% { background-color: #f0f0f0; border-color: #ccc; }
}

.grid-cell.invalid-selection {
  animation: invalid-selection-pulse 0.3s ease;
}

/* ==========================================================================
   5. Beach Cells & Island Styling
   ========================================================================== */

/* Beach cells (sea-adjacent) */
.grid-cell.sea-adjacent {
  background-color: var(--lightblue) !important;
  border-color: var(--defaultblue) !important;
  transition: none !important;
  z-index: 2 !important;
  transform: translateZ(0);
  backface-visibility: hidden;
}

.grid-cell.sea-adjacent.no-transition,
.grid-cell.preserved-beach-cell {
  background-color: var(--lightblue) !important;
  transition: none !important;
  z-index: 2 !important;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Shore edge styling */
.grid-cell.sea-adjacent.shore-edge-top,
.grid-cell.preserved-beach-cell.shore-edge-top {
  border-top: 6px solid var(--sandyellow) !important;
  transition: none !important;
}

.grid-cell.sea-adjacent.shore-edge-right,
.grid-cell.preserved-beach-cell.shore-edge-right {
  border-right: 6px solid var(--sandyellow) !important;
  transition: none !important;
}

.grid-cell.sea-adjacent.shore-edge-bottom,
.grid-cell.preserved-beach-cell.shore-edge-bottom {
  border-bottom: 6px solid var(--sandyellow) !important;
  transition: none !important;
}

.grid-cell.sea-adjacent.shore-edge-left,
.grid-cell.preserved-beach-cell.shore-edge-left {
  border-left: 6px solid var(--sandyellow) !important;
  transition: none !important;
}

/* ==========================================================================
   6. Snake Pieces & Animations
   ========================================================================== */

.snake-piece {
  position: absolute !important;
  top: 0 !important;
  left: 0 !important;
  width: 100% !important;
  height: 100% !important;
  pointer-events: none !important;
  z-index: 500 !important;
  object-fit: contain;
  background-size: contain !important;
  background-position: center !important;
  background-repeat: no-repeat !important;
  image-rendering: -webkit-optimize-contrast;
  transform-origin: center;
  transition: visibility 0.1s ease, transform 0.2s ease;
  overflow: hidden;
  display: block;
  opacity: 1;
}

/* Snake piece types */
.snake-tail,
.snake-straight,
.snake-curved {
  filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.3));
}

.snake-head {
  filter: drop-shadow(0 0 2px rgba(0, 0, 0, 0.3));
  z-index: 11;
}

.snake-piece.flash-hidden {
  visibility: hidden !important;
  opacity: 0 !important;
}

/* Flash animations */
@keyframes flash-visibility {
  0% { visibility: visible; }
  50% { visibility: hidden; }
  100% { visibility: visible; }
}

.snake-flash-animation {
  animation: flash-visibility 1s ease 2;
}

@keyframes standardized-flash {
  0% { visibility: visible; opacity: 1; }
  50% { visibility: hidden; opacity: 0; }
  100% { visibility: visible; opacity: 1; }
}

.flashing-animation {
  animation: standardized-flash 0.5s ease-in-out 2;
}

/* Completed path styling */
.grid-cell.completed-cell .snake-piece {
  filter: drop-shadow(0 0 3px rgba(76, 175, 80, 0.5));
}

.grid-cell.selected-cell .snake-piece {
  z-index: 550 !important;
}

.grid-cell.selected-cell {
  color: #004d40 !important;
  font-weight: bold;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);
  position: relative;
}

.grid-cell.revealed-cell .snake-piece {
  opacity: 0.7;
}

/* Special snake piece positioning */
.grid-cell.start-cell .snake-tail {
  z-index: 12;
}

.grid-cell.selected-cell:last-child .snake-head {
  z-index: 12;
  filter: drop-shadow(0 0 4px rgba(76, 175, 80, 0.5));
}

/* ==========================================================================
   7. Sea Icons & Tooltips
   ========================================================================== */

.grid-cell.has-sea-icon {
  position: relative;
}

.sea-icon-svg {
  position: absolute !important;
  top: 50% !important;
  left: 50% !important;
  transform: translate(-50%, -50%) !important;
  font-size: clamp(14px, 3vw, 22px) !important;
  color: #444444 !important;
  opacity: 0.7 !important;
  pointer-events: auto !important;
  z-index: 50 !important;
  cursor: pointer !important;
  user-select: none !important;
  text-shadow: 0 0 2px rgba(255, 255, 255, 0.3) !important;
  will-change: transform !important;
  backface-visibility: hidden !important;
  transform-origin: center center !important;
  transition: opacity 0.2s ease, transform 0.2s ease !important;
}

/* Font Awesome icon families */
.sea-icon-svg.fa-solid {
  font-family: 'Font Awesome 6 Free', 'Font Awesome 5 Free' !important;
  font-weight: 900 !important;
}

.sea-icon-svg.fa-brands {
  font-family: 'Font Awesome 6 Brands', 'Font Awesome 5 Brands' !important;
  font-weight: 400 !important;
}

/* Sea icon animations */
@keyframes seaIconFloat {
  0% { transform: translate(-50%, -50%) rotate(0deg); }
  50% { transform: translate(-50%, -50%) rotate(3deg); }
  100% { transform: translate(-50%, -50%) rotate(0deg); }
}

.sea-icon-svg {
  animation: seaIconFloat 4s ease-in-out infinite;
}

.grid-cell:nth-child(odd) .sea-icon-svg {
  animation-duration: 5s;
  animation-delay: 1s;
}

.grid-cell:nth-child(even) .sea-icon-svg {
  animation-duration: 4.5s;
  animation-delay: 0.5s;
}

/* Disable transitions during scrolling */
.grid-container.slow-scroll .sea-icon-svg,
.grid-container.fast-scroll .sea-icon-svg {
  transition: none !important;
}

.grid-cell.has-sea-icon .sea-icon-svg {
  visibility: visible !important;
}

.grid-cell.has-sea-icon {
  overflow: visible;
}

/* Sea icon tooltips */
.sea-icon-tooltip {
  position: fixed;
  background-color: var(--defaultblue-lightest);
  color: #444444;
  padding: 12px 16px;
  border-radius: 6px;
  font-size: 14px;
  max-width: 220px;
  text-align: center;
  z-index: 2000;
  pointer-events: none;
  opacity: 0;
  transform: translateX(-50%) translateY(-100%) scale(0.9);
  transition: opacity 0.3s ease, transform 0.3s ease;
  font-style: italic;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  border: 2px solid var(--defaultblue-lightest);
  display: none;
  font-family: 'Trebuchet MS', Arial, sans-serif;
  line-height: 1.3;
}

.sea-icon-tooltip.visible {
  opacity: 1;
  transform: translateX(-50%) translateY(-100%) scale(1);
  display: block;
}

.sea-icon-tooltip::after {
  content: '';
  position: absolute;
  top: 100%;
  left: 50%;
  transform: translateX(-50%);
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-top: 8px solid var(--defaultblue-lightest);
}

/* ==========================================================================
   8. Word Completion Features
   ========================================================================== */

@keyframes word-completed-flash {
  0% { background-color: var(--maingreen) !important; }
  50% { background-color: #3b9c68 !important; }
  100% { background-color: var(--maingreen) !important; }
}

.grid-cell.word-completed-flash {
  animation: word-completed-flash 0.5s ease-in-out !important;
  transition: none !important;
}

.completed-word-char {
  color: black !important;
  font-weight: bold !important;
}

.phrase-char.punctuation-char {
  color: black !important;
}

.phrase-char.hint-letter {
  color: black !important;
}

.phrase-char[data-char="_"] {
  color: #999999 !important;
}

#phrase-text .phrase-char:not(.completed-word-char):not(.punctuation-char):not(.hint-letter):not([data-char="_"]) {
  color: #999999 !important;
}

@keyframes hint-letter-pulse {
  0% { font-weight: normal; transform: scale(1); }
  50% { font-weight: bold; transform: scale(1.2); color: #4CAF50; }
  100% { font-weight: normal; transform: scale(1); }
}

.hint-letter-match {
  display: inline-block;
  animation: hint-letter-pulse 1s ease-in-out;
}

/* ==========================================================================
   9. Triangular Controller (30% larger on mobile)
   ========================================================================== */

.triangular-controller-container {
  width: 90px;
  height: 90px;
  position: relative;
  margin: 20px auto;
  user-select: none;
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-template-rows: 1fr 1fr;
}

.triangle-button {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.15s ease;
  user-select: none;
  background: repeating-linear-gradient(
    120deg,
    var(--btn-metal-light) 0px,
    var(--btn-metal-medium) 10px,
    var(--btn-metal-light) 30px,
    var(--btn-metal-mediumlight) 55px,
    var(--btn-metal-medium) 80px,
    var(--btn-metal-mediumlight) 95px,
    var(--btn-metal-light) 120px,
    var(--btn-metal-medium) 135px
  );
  border: 2px solid var(--btn-metal-border);
  box-shadow: 
    0 4px 8px 1px var(--btn-metal-shadow),
    0 1px 3px 1px rgba(0, 0, 0, 0.15),
    inset 0 1px 2px var(--btn-metal-inner-highlight),
    inset 0 -1px 2px var(--btn-metal-inner-shadow);
}

/* Triangle shapes */
.triangle-up {
  grid-column: 1 / 3;
  grid-row: 1;
  height: 45px;
  clip-path: polygon(0 0, 100% 0, 50% 100%);
  z-index: 2;
  border-bottom: none;
}

.triangle-right {
  grid-column: 2;
  grid-row: 1 / 3;
  width: 45px;
  clip-path: polygon(100% 0, 100% 100%, 0 50%);
  z-index: 2;
  border-left: none;
}

.triangle-down {
  grid-column: 1 / 3;
  grid-row: 2;
  height: 45px;
  clip-path: polygon(0 100%, 100% 100%, 50% 0);
  z-index: 2;
  border-top: none;
}

.triangle-left {
  grid-column: 1;
  grid-row: 1 / 3;
  width: 45px;
  clip-path: polygon(0 0, 0 100%, 100% 50%);
  z-index: 2;
  border-right: none;
}

/* Center decorative circle */
.triangular-controller-container::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 24px;
  height: 24px;
  border-radius: 50%;
  z-index: 3;
  pointer-events: none;
  background: repeating-linear-gradient(
    45deg,
    var(--btn-metal-light) 0px,
    var(--btn-metal-medium) 3px,
    var(--btn-metal-light) 6px,
    var(--btn-metal-mediumlight) 9px,
    var(--btn-metal-medium) 12px,
    var(--btn-metal-mediumlight) 15px,
    var(--btn-metal-light) 18px,
    var(--btn-metal-medium) 21px
  );
  border: 1px solid var(--btn-metal-border);
  box-shadow: 
    0 2px 4px var(--btn-metal-shadow),
    0 1px 2px rgba(0, 0, 0, 0.15),
    inset 0 1px 1px var(--btn-metal-inner-highlight),
    inset 0 -1px 1px var(--btn-metal-inner-shadow);
}

.triangle-arrow {
  font-size: 14px;
  color: var(--btn-text-color);
  text-shadow: 
    0px 1px 1px var(--btn-text-shadow-light),
    0px -1px 1px var(--btn-text-shadow-dark);
  transition: transform 0.15s ease, color 0.15s ease;
  pointer-events: none;
  z-index: 10;
  position: relative;
}

/* Arrow positioning */
.triangle-up .triangle-arrow { transform: translateY(-8px); }
.triangle-right .triangle-arrow { transform: translateX(8px); }
.triangle-down .triangle-arrow { transform: translateY(8px); }
.triangle-left .triangle-arrow { transform: translateX(-8px); }

/* Button states */
.triangle-button.active {
  background: repeating-linear-gradient(
    120deg,
    var(--btn-metal-dark) 0px,
    var(--btn-metal-darker) 10px,
    var(--btn-metal-dark) 30px,
    var(--btn-metal-mediumdark) 55px,
    var(--btn-metal-darker) 80px,
    var(--btn-metal-mediumdark) 95px,
    var(--btn-metal-dark) 120px,
    var(--btn-metal-darker) 135px
  ) !important;
  box-shadow: 
    inset 0 4px 8px rgba(0, 0, 0, 0.5),
    inset 0 2px 4px rgba(0, 0, 0, 0.6);
  transform: scale(0.95);
  animation: triangle-button-pulse 0.2s ease;
}

.triangle-button.active .triangle-arrow {
  color: var(--btn-text-active);
  text-shadow: 
    0px 1px 0px var(--btn-text-shadow-pressed-light),
    0px -1px 0px var(--btn-text-shadow-pressed-dark);
}

/* Active state positioning */
.triangle-up.active .triangle-arrow { transform: translateY(-8px) scale(0.95); }
.triangle-right.active .triangle-arrow { transform: translateX(8px) scale(0.95); }
.triangle-down.active .triangle-arrow { transform: translateY(8px) scale(0.95); }
.triangle-left.active .triangle-arrow { transform: translateX(-8px) scale(0.95); }

/* Long press animation */
.triangle-button.long-pressing {
  background: repeating-linear-gradient(
    120deg,
    var(--btn-metal-dark) 0px,
    var(--btn-metal-darker) 10px,
    var(--btn-metal-dark) 30px,
    var(--btn-metal-mediumdark) 55px,
    var(--btn-metal-darker) 80px,
    var(--btn-metal-mediumdark) 95px,
    var(--btn-metal-dark) 120px,
    var(--btn-metal-darker) 135px
  ) !important;
  animation: triangle-long-press-pulse 0.6s infinite;
  transform: scale(0.95);
}

@keyframes triangle-button-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(0.95); }
  100% { transform: scale(0.95); }
}

@keyframes triangle-long-press-pulse {
  0%, 100% { 
    box-shadow: 
      inset 0 4px 8px rgba(0, 0, 0, 0.5),
      inset 0 2px 4px rgba(0, 0, 0, 0.6);
  }
  50% { 
    box-shadow: 
      inset 0 6px 12px rgba(0, 0, 0, 0.7),
      inset 0 3px 6px rgba(0, 0, 0, 0.8);
  }
}

/* Disabled state */
.triangle-button.disabled {
  opacity: 0.3;
  cursor: default;
  pointer-events: none;
}

.triangle-button.disabled .triangle-arrow {
  color: #999;
  text-shadow: none;
}

/* ==========================================================================
   10. Phrase Display (Enhanced for Mobile)
   ========================================================================== */

.phrase-display {
  width: 100%;
  max-width: 650px;
  margin: 0 auto;
  padding: 15px;
  background-color: var(--box-bg-color);
  border: 1px solid var(--box-border-color);
  border-top: 2px solid var(--btn-metal-lighter);
  border-left: 2px solid var(--btn-metal-light);
  border-right: 2px solid var(--btn-metal-dark);
  border-bottom: 3px solid var(--btn-metal-darker);
  border-radius: 0 0 8px 8px;
  border-top-left-radius: 0;
  border-top-right-radius: 0;
  box-shadow: 
    0 8px 15px 3px rgba(0, 0, 0, 0.2),
    0 2px 8px 2px var(--btn-metal-shadow);
  box-sizing: border-box;
  min-height: 60px;
  transition: min-height 0.3s ease;
}

#phrase-text {
  font-size: clamp(1rem, 3vw, 1.3rem);
  letter-spacing: clamp(1px, 0.5vw, 2px);
  text-align: center;
  margin: 0;
  padding: 0;
  font-family: monospace;
  word-wrap: break-word;
  overflow-wrap: break-word;
  line-height: 1.4;
  color: #444;
  text-shadow: 
    0px 1px 1px rgba(255, 255, 255, 0.8),
    0px -1px 1px rgba(0, 0, 0, 0.2);
}

/* ==========================================================================
   11. Menu System
   ========================================================================== */

#menu-button-container {
  position: absolute;
  top: 10px;
  right: 20px;
  z-index: 100;
}

.menu-button {
  width: 44px;
  height: 44px;
  border-radius: 4px;
  padding: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #f0f0f0;
  border: 1px solid #cccccc;
  cursor: pointer;
  transition: all 0.2s ease;
}

.menu-button:hover {
  background-color: #e8e8e8;
  transform: scale(1.05);
}

.menu-icon {
  position: relative;
  width: 24px;
  height: 18px;
}

.menu-icon::before,
.menu-icon::after,
.menu-icon span {
  position: absolute;
  left: 0;
  width: 100%;
  height: 3px;
  background-color: #444;
  content: '';
  transition: all 0.3s ease;
}

.menu-icon::before { top: 0; }
.menu-icon span { top: 7.5px; }
.menu-icon::after { bottom: 0; }

/* Menu animation */
.menu-button.active .menu-icon::before {
  transform: translateY(7.5px) rotate(45deg);
}

.menu-button.active .menu-icon::after {
  transform: translateY(-7.5px) rotate(-45deg);
}

.menu-button.active .menu-icon span {
  opacity: 0;
}

.menu-dropdown {
  position: absolute;
  top: 54px;
  right: 0;
  background-color: #ffffff;
  border: 2px solid #cccccc;
  border-radius: 6px;
  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
  width: 200px;
  max-width: 90vw;
  display: none;
  z-index: 1000;
  overflow: hidden;
  opacity: 1;
  max-height: 80vh;
  overflow-y: auto;
}

.menu-dropdown.active {
  display: block;
}

.menu-dropdown::before {
  content: '';
  position: absolute;
  top: -8px;
  right: 16px;
  width: 0;
  height: 0;
  border-left: 8px solid transparent;
  border-right: 8px solid transparent;
  border-bottom: 8px solid #cccccc;
}

.menu-item {
  width: 100%;
  padding: 12px 15px;
  text-align: left;
  background-color: #ffffff;
  border: none;
  border-bottom: 1px solid #cccccc;
  font-family: 'Trebuchet MS', Arial, sans-serif;
  font-size: 0.95rem;
  cursor: pointer;
  transition: background 0.2s ease;
  color: #444;
  display: block;
}

.menu-item:last-child {
  border-bottom: none;
}

.menu-item:hover {
  background-color: #e8e8e8;
}

.menu-separator {
  height: 1px;
  background-color: #cccccc;
  margin: 5px 0;
  opacity: 1;
}

/* Menu item states */
.menu-item.hint-button[id^="hint-level-"],
.menu-item.hint-button[id^="island-level-"] {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.menu-item.hint-button[id^="hint-level-"].active-hint,
.menu-item.hint-button[id^="island-level-"].active-island {
  background-color: #e0e0e0;
  font-weight: bold;
}

.menu-item.hint-button[id^="hint-level-"].disabled-hint,
.menu-item.hint-button[id^="island-level-"].disabled-island,
.disabled-hint {
  color: grey !important;
  cursor: not-allowed;
}

/* Erosion pause button styling */
.menu-item.erosion-paused {
  background-color: rgba(76, 175, 80, 0.3) !important;
  color: #2e7d32 !important;
  font-weight: bold !important;
  border: 1px solid #4caf50 !important;
  box-shadow: inset 0 2px 4px rgba(76, 175, 80, 0.2) !important;
}

.menu-item.erosion-paused:hover {
  background-color: rgba(76, 175, 80, 0.4) !important;
  color: #1b5e20 !important;
}

.menu-item.erosion-button {
  transition: all 0.2s ease;
}

.menu-item.erosion-button:hover {
  background-color: rgba(0, 0, 0, 0.1);
}

/* ==========================================================================
   12. Erosion Effects
   ========================================================================== */

.grid-cell.eroding-cell {
  animation: eroding-pulse 1s infinite alternate;
  transition: background-color 0.3s ease, opacity 0.3s ease, transform 0.3s ease;
  z-index: 8;
}

@keyframes eroding-pulse {
  0% {
    opacity: 1;
    background-color: var(--defaultblue-light);
    border-color: var(--defaultblue);
  }
  100% {
    opacity: 0.5;
    background-color: var(--maingreen-light);
    border-color: var(--maingreen-dark);
  }
}

.grid-cell.eroding-cell.flash-visible {
  opacity: 1;
  background-color: var(--sandyellow);
  border-color: var(--sandyellow);
}

.grid-cell.eroding-cell.path-cell.flash-visible {
  z-index: 10;
  background-color: #ff6b6b !important;
  color: white !important;
  font-weight: bold !important;
  box-shadow: 0 0 8px rgba(255, 0, 0, 0.6) !important;
  transform: scale(1.05);
}

/* Game over message styling */
#message-container {
  font-family: 'Trebuchet MS', Arial, sans-serif;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.6);
  max-width: 90%;
  line-height: 1.4;
  z-index: 1000;
}

#retry-button {
  margin-top: 15px;
  padding: 8px 15px;
  background: #fff;
  color: #d32f2f;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  font-weight: bold;
  transition: background-color 0.2s ease, transform 0.2s ease;
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
}

#retry-button:hover {
  background-color: #f8f8f8;
  transform: scale(1.05);
}

#retry-button:active {
  transform: scale(0.98);
}

.grid-cell.eroding-cell.path-cell {
  z-index: 9;
}

/* ==========================================================================
   13. Mobile Optimizations & Responsive Design
   ========================================================================== */

/* Tablet/Medium screens (768px and below) */
@media (max-width: 768px) {
  /* Game container mobile layout */
  .game-container {
    padding: 70px 10px 20px 10px; /* Top padding for menu clearance */
    display: flex;
    flex-direction: column;
    align-items: center;
    min-height: 100vh;
  }
  
  #grid-container {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
  }
  
  /* Mobile grid cells - responsive sizing */
  .grid-cell {
    font-size: clamp(1rem, 3vw, 1.3rem);
  }
  
  /* PHRASE DISPLAY - Larger font and menu clearance */
  .phrase-display {
    margin-top: 60px; /* Height of burger menu + buffer */
    margin-bottom: 15px;
    font-size: 1.3rem; /* Larger font size as requested */
    letter-spacing: 1.8px;
    line-height: 1.5;
    padding: 12px;
    min-height: 55px;
  }
  
  #phrase-text {
    font-size: 1.3rem; /* Increased from 1.1rem */
    letter-spacing: 1.8px; /* Slightly increased */
  }
  
  /* TRIANGULAR CONTROLLER - 30% larger on mobile */
  .triangular-controller-container {
    width: 97px; /* Increased from 75px (30% larger) */
    height: 97px; /* Increased from 75px (30% larger) */
    margin-top: 15px;
    margin-bottom: 20px;
  }
  
  .triangle-up, .triangle-down {
    height: 48px; /* Increased from 37px (30% larger) */
  }
  
  .triangle-left, .triangle-right {
    width: 48px; /* Increased from 37px (30% larger) */
  }
  
  .triangle-arrow {
    font-size: 16px; /* Increased from 12px (30% larger) */
  }
  
  /* Adjust center circle proportionally */
  .triangular-controller-container::after {
    width: 23px; /* Increased from 18px */
    height: 23px; /* Increased from 18px */
  }
  
  /* Menu button positioning */
  #menu-button-container {
    top: 8px;
    right: 15px;
    z-index: 200;
  }
  
  .menu-button {
    width: 40px;
    height: 40px;
  }
  
  .menu-dropdown {
    top: 50px;
    max-width: calc(100vw - 30px);
  }
  
  .menu-item {
    padding: 10px 12px;
    font-size: 0.9rem;
  }
  
  /* Snake pieces mobile scaling */
  .snake-piece {
    width: 100% !important;
    height: 100% !important;
    padding: 1px;
  }
  
  /* Sea icons mobile scaling */
  .sea-icon-svg {
    font-size: 16px !important;
  }
}

/* Small screens (480px and below) */
@media (max-width: 480px) {
  .game-container {
    padding: 60px 8px 15px 8px;
  }
  
  /* PHRASE DISPLAY - Mobile optimized */
  .phrase-display {
    margin-top: 55px;
    padding: 10px;
    min-height: 50px;
    font-size: 1.2rem; /* Still larger than before */
  }
  
  #phrase-text {
    font-size: 1.2rem; /* Increased from 0.95rem */
    letter-spacing: 1.5px;
  }
  
  /* TRIANGULAR CONTROLLER - 30% larger than original small size */
  .triangular-controller-container {
    width: 83px; /* 30% larger than the 64px it was before */
    height: 83px;
    margin: 18px auto;
  }
  
  .triangle-up, .triangle-down {
    height: 42px; /* 30% larger than 32px */
  }
  
  .triangle-left, .triangle-right {
    width: 42px; /* 30% larger than 32px */
  }
  
  .triangle-arrow {
    font-size: 14px; /* 30% larger than 11px */
  }
  
  .triangular-controller-container::after {
    width: 21px; /* 30% larger than 16px */
    height: 21px;
  }
  
  /* Menu system mobile */
  #menu-button-container {
    top: 5px;
    right: 10px;
  }
  
  .menu-button {
    width: 36px;
    height: 36px;
  }
  
  .menu-dropdown {
    top: 46px;
    right: 0;
    width: calc(100vw - 20px);
    max-width: 250px;
  }
  
  /* Snake pieces very small screens */
  .snake-piece {
    padding: 2px;
  }
  
  /* Sea icons very small screens */
  .sea-icon-svg {
    font-size: 14px !important;
  }
  
  /* Grid cells font size */
  .grid-cell {
    font-size: clamp(0.9rem, 2.5vw, 1.1rem);
  }
}

/* ==========================================================================
   14. Mobile-Specific Behavior Optimizations
   ========================================================================== */

/* Touch device optimizations */
@media (pointer: coarse) {
  /* Disable all transitions on mobile for better performance */
  .grid-cell, 
  .grid-cell.sea-adjacent,
  .grid-container.fast-scroll,
  .grid-container.slow-scroll {
    transition: none !important;
  }
  
  .grid-cell.sea-adjacent {
    will-change: auto !important;
  }
  
  .grid-container {
    touch-action: none !important;
  }
  
  /* Make selected cells more visible on touch devices */
  .grid-cell.selected-cell {
    border-width: 3px;
  }
}

/* iOS and Safari specific improvements */
@supports (-webkit-touch-callout: none) {
  .grid-cell {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }
  
  .grid-cell.sea-adjacent,
  .grid-cell.preserved-beach-cell {
    -webkit-transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    -webkit-perspective: 1000;
  }
  
  .grid-container.fast-scroll,
  .grid-container.slow-scroll {
    -webkit-transition-property: -webkit-transform;
    -webkit-transition-timing-function: cubic-bezier(0.2, 0.0, 0.1, 1.0);
  }
  
  .snake-piece {
    -webkit-tap-highlight-color: transparent;
  }
}

/* ==========================================================================
   15. Hover Effects (Desktop Only)
   ========================================================================== */

@media (hover: hover) and (pointer: fine) {
  /* Apply transitions only on hover for regular sea cells */
  .grid-cell:not(.sea-adjacent):not(.path-cell):not(.preserved-beach-cell) {
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
  }
  
  /* Hover for sea cells */
  .grid-cell:not(.path-cell):not(.start-cell):not(.out-of-bounds):hover {
    background-color: var(--defaultblue-light);
    cursor: pointer;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
  }
  
  /* Hover for letter island cells */
  .grid-cell.path-cell:hover:not(.selected-cell):not(.start-cell):not(.revealed-cell):not(.completed-cell) {
    background-color: var(--maingreen-light) !important;
    cursor: pointer;
  }
  
  /* Selected cell hover */
  .grid-cell.selected-cell:hover {
    background-color: var(--maingreen-lighter) !important;
    cursor: pointer;
  }
  
  /* Revealed cell hover */
  .grid-cell.revealed-cell:hover:not(.selected-cell):not(.completed-cell) {
    background-color: #ef9a9a !important;
    cursor: pointer;
  }
  
  /* Completed cell hover */
  .grid-cell.completed-cell:hover {
    background-color: #c8e6c9 !important;
    cursor: default !important;
  }
  
  /* Triangle button hover effects */
  .triangle-button:hover:not(.disabled) {
    background: repeating-linear-gradient(
      120deg,
      var(--btn-metal-lighter) 0px,
      var(--btn-metal-light) 15px,
      var(--btn-metal-lighter) 35px,
      var(--btn-metal-mediumlight) 60px,
      var(--btn-metal-light) 85px,
      var(--btn-metal-mediumlight) 100px,
      var(--btn-metal-lighter) 125px,
      var(--btn-metal-light) 140px
    );
  }
  
  .triangle-button:hover:not(.disabled) .triangle-arrow {
    transform: scale(1.15);
    color: var(--btn-text-hover);
  }
  
  /* Keep positioning transforms with scaling */
  .triangle-up:hover:not(.disabled) .triangle-arrow {
    transform: translateY(-8px) scale(1.15);
  }
  
  .triangle-right:hover:not(.disabled) .triangle-arrow {
    transform: translateX(8px) scale(1.15);
  }
  
  .triangle-down:hover:not(.disabled) .triangle-arrow {
    transform: translateY(8px) scale(1.15);
  }
  
  .triangle-left:hover:not(.disabled) .triangle-arrow {
    transform: translateX(-8px) scale(1.15);
  }
  
  /* Sea icon hover effects */
  .sea-icon-svg:hover {
    opacity: 1 !important;
    transform: translate(-50%, -50%) scale(1.1) !important;
    color: #222222 !important;
  }
  
  /* Snake piece hover effects */
  .grid-cell.selected-cell:hover .snake-piece {
    filter: drop-shadow(0 0 4px rgba(0, 150, 136, 0.6));
  }
}

/* ==========================================================================
   16. Animation Performance & GPU Acceleration
   ========================================================================== */

/* Better GPU acceleration for all grid components */
.grid-container, 
.grid-cell, 
.snake-piece {
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Transition optimizations */
.grid-container {
  transition-property: transform;
  transition-timing-function: cubic-bezier(0.25, 0.1, 0.25, 1);
  will-change: transform;
}

.grid-container.fast-scroll {
  transition-duration: 200ms;
}

.grid-container.slow-scroll {
  transition-duration: 400ms;
}

/* Button pulse animation - without translation */
@keyframes button-pulse {
  0% { transform: scale(1); }
  50% { 
    transform: scale(1.02);
    background: repeating-linear-gradient(
      120deg,
      var(--btn-metal-lighter) 0px,
      var(--btn-metal-light) 15px,
      var(--btn-metal-lighter) 35px,
      var(--btn-metal-mediumlight) 60px,
      var(--btn-metal-light) 85px,
      var(--btn-metal-mediumlight) 100px,
      var(--btn-metal-lighter) 125px,
      var(--btn-metal-light) 140px
    );
  }
  100% { 
    transform: scale(1);
    background: repeating-linear-gradient(
      120deg,
      var(--btn-metal-light) 0px,
      var(--btn-metal-medium) 10px,
      var(--btn-metal-light) 30px,
      var(--btn-metal-mediumlight) 55px,
      var(--btn-metal-medium) 80px,
      var(--btn-metal-mediumlight) 95px,
      var(--btn-metal-light) 120px,
      var(--btn-metal-medium) 135px
    );
  }
}

/* ==========================================================================
   17. Utility Classes & Cleanup
   ========================================================================== */

/* Hide deprecated elements */
.refresh-button-container {
  display: none;
}

/* Prevent horizontal scrolling on mobile */
* {
  max-width: 100vw;
  box-sizing: border-box;
}

/* Ensure proper stacking context */
.grid-container {
  isolation: isolate;
}

/* Mobile viewport fixes */
@media (max-width: 768px) {
  html, body {
    overflow-x: hidden;
    width: 100%;
  }
}

/* ==========================================================================
   18. Print Styles (Optional)
   ========================================================================== */

@media print {
  .menu-button-container,
  .triangular-controller-container,
  .sea-icon-svg {
    display: none !important;
  }
  
  .game-container {
    max-width: none;
    margin: 0;
    padding: 20px;
  }
  
  .grid-container {
    box-shadow: none;
    border: 2px solid #000;
  }
  
  .phrase-display {
    margin-top: 20px;
    box-shadow: none;
    border: 1px solid #000;
  }
}

/* ==========================================================================
   19. Shakespeare Response Components - Universal Styles
   Base styles used across all Shakespeare modals
   ========================================================================== */

.shakespeare-modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.7);
  display: flex;
  justify-content: center;
  align-items: flex-start;
  z-index: 2000;
  opacity: 1;
  transition: opacity 3s ease; /* Increased from 2s to 3s for slower fade */
  padding-top: 40px;
  padding-bottom: 20px;
  pointer-events: none;
}

.shakespeare-modal-overlay.fade-out {
  opacity: 0;
}

.shakespeare-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  max-width: 85%;
  margin: 0 auto;
  transition: transform 0.8s ease, opacity 3s ease; /* Added opacity transition matching overlay */
  pointer-events: auto;
  z-index: 2050;
}

.shakespeare-image {
  width: 200px;
  height: auto;
  filter: drop-shadow(3px 3px 5px rgba(0, 0, 0, 0.3));
  margin-top: 20px;
  transition: opacity 3s ease, transform 2s ease; /* Increased opacity transition from 2s to 3s */
  z-index: 2060;
  pointer-events: none;
}

/* Universal speech bubble styles */
.speech-bubble {
  position: relative;
  background: #fffacd;
  border: none;
  border-radius: 8px;
  padding: 25px;
  margin-bottom: 30px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  max-width: 420px;
  width: 100%;
  text-align: center;
  transition: opacity 3s ease; /* Increased from 1s to 3s for slower fade */
  pointer-events: auto;
}

/* Triangle pointer for speech bubble - pointing down */
.speech-bubble:after {
  content: '';
  position: absolute;
  bottom: -15px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 15px 15px 0;
  border-style: solid;
  border-color: #fffacd transparent;
  display: block;
  width: 0;
}

/* Universal text styles - ALL TREBUCHET MS */
.response-text,
.question-text,
.feedback-message,
.info-text,
.instructions-container,
.farewell-message {
  font-family: 'Trebuchet MS', Arial, sans-serif;
  color: #555;
  line-height: 1.5;
}

/* Universal button styles */
.choice-button {
  padding: 12px 30px;
  border: none;
  border-radius: 25px;
  font-family: 'Trebuchet MS', Arial, sans-serif;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
  min-width: 80px;
}

.yes-button {
  background: linear-gradient(135deg, #4CAF50, #45a049);
  color: white;
}

.yes-button:hover {
  background: linear-gradient(135deg, #45a049, #3d8b40);
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
}

.no-button {
  background: linear-gradient(135deg, #f44336, #da190b);
  color: white;
}

.no-button:hover {
  background: linear-gradient(135deg, #da190b, #c62828);
  transform: translateY(-2px);
  box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
}

.choice-button:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

/* ==========================================================================
   19a. Welcome Modal Styles
   Initial welcome screen with game title and instructions
   ========================================================================== */

.welcome-modal-overlay {
  padding-top: 20px !important;
  transition: opacity 3s ease; /* Increased from 2s to 3s for slower farewell fade */
}

.welcome-shakespeare-container {
  max-width: 95%;
}

.welcome-shakespeare-image {
  margin-top: 40px;
}

.welcome-speech-bubble {
  max-width: 520px !important;
  padding: 30px !important;
  margin-bottom: 20px !important;
}

/* Game title using grid cell appearance */
.game-title-container {
  margin-bottom: 35px; /* Increased from 25px for more space after title */
  text-align: center;
}

.title-grid {
  display: flex;
  justify-content: center;
  gap: 0; /* No gap between tiles */
  flex-wrap: wrap;
  margin: 0 auto;
}

.title-cell {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: var(--maingreen) !important; /* Match path-cell background */
  color: var(--text-dark) !important; /* Match path-cell text color */
  border: 1px solid var(--maingreen-dark) !important; /* Match path-cell border thickness and color */
  border-radius: 4px;
  font-family: 'Trebuchet MS', Arial, sans-serif;
  font-weight: bold;
  font-size: 1.4rem; /* Increased from 1.2rem */
  text-shadow: 0px 1px 1px rgba(255, 255, 255, 0.8) !important; /* Match path-cell text shadow */
  box-shadow: 0 2px 4px var(--box-shadow-color); /* Keep existing shadow for depth */
  width: 46px; /* Increased from 40px */
  height: 46px; /* Increased from 40px */
  position: relative;
  box-sizing: border-box;
}

/* Snake icon replaces the 'S' completely */
.title-snake-icon {
  position: static;
  font-size: 1.8rem; /* Increased from 1.6rem to match larger cell */
  color: var(--text-dark);
  text-shadow: 0px 1px 1px rgba(255, 255, 255, 0.8);
}

/* Hide the 'S' letter when snake icon is present */
.title-cell:has(.title-snake-icon) .title-letter {
  display: none;
}

.title-letter {
  position: relative;
  z-index: 2;
}

/* Instructions styles */
.instructions-container {
  font-size: 20px; /* Increased from 16px */
  line-height: 1.4;
}

.instructions-list {
  list-style: none;
  padding: 0;
  margin: 0 0 25px 0; /* Increased from 15px for more space before ENTER button */
}

.instruction-item {
  margin-bottom: 12px;
  padding-left: 0; /* No bullet point padding */
  position: relative;
}

/* No bullet points */
.instruction-item:before {
  display: none;
}

/* Enter button styles */
.enter-button-container {
  text-align: center;
  margin: 15px 0; /* Reduced from 20px 0 */
  transition: opacity 0.5s ease-in-out;
}

.enter-button {
  min-width: 100px;
  font-size: 18px; /* Increased button text size */
}

/* Farewell message styles */
.farewell-container {
  text-align: center;
  margin: 15px 0 10px 0; /* Reduced bottom margin from 20px to 10px */
}

.farewell-message {
  font-size: 20px; /* Increased from 18px */
  font-weight: normal; /* Not bold */
  margin: 0;
  font-style: normal; /* Not italic */
}

/* ==========================================================================
   19b. Interactive Response Modal Styles
   Shakespeare response with quiz functionality
   ========================================================================== */

/* Shakespeare container moves up when info box appears */
.info-box-container:not([style*="display: none"]) ~ .shakespeare-modal-overlay .shakespeare-container {
  transform: translateY(-120px);
}

/* Response text styling */
.response-text {
  margin: 0 0 20px 0;
  font-size: 18px;
}

/* Question container */
.question-container {
  margin-top: 20px;
  padding-top: 20px;
}

/* Question text */
.question-text {
  margin: 0 0 20px 0;
  font-size: 18px;
}

/* Button container */
.button-container {
  display: flex;
  gap: 20px;
  justify-content: center;
  margin-top: 15px;
}

.info-box-container {
  position: fixed;
  bottom: 20px;
  left: 0;
  width: 100%;
  display: flex;
  justify-content: center;
  z-index: 2100;
  padding: 20px;
  opacity: 1;
  transition: opacity 3s ease, transform 1s ease; /* Increased opacity transition from 2s to 3s */
  pointer-events: auto;
}

.info-box-container.fade-out {
  opacity: 0;
  transform: translateY(100%);
}

.info-box {
  position: relative;
  background: #fffacd;
  border: none;
  border-radius: 8px;
  padding: 20px 25px;
  box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.15);
  max-width: 580px;
  width: 100%;
  text-align: center;
  pointer-events: auto;
}

/* Triangle pointer for info box - pointing up */
.info-box:before {
  content: '';
  position: absolute;
  top: -15px;
  left: 50%;
  transform: translateX(-50%);
  border-width: 0 15px 15px;
  border-style: solid;
  border-color: transparent transparent #fffacd;
  display: block;
  width: 0;
}

/* Close button */
.info-box-close {
  position: absolute;
  top: 8px;
  right: 12px;
  width: 24px;
  height: 24px;
  background: none;
  color: #555;
  border: none;
  font-size: 20px;
  line-height: 1;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 0;
  transition: color 0.2s ease;
  z-index: 2110;
  font-weight: bold;
  pointer-events: auto;
}

.info-box-close:hover {
  color: #333;
}

.info-box-close:active {
  color: #000;
}

/* Feedback message */
.feedback-message {
  margin: 0 0 15px 0;
  font-size: 18px;
  font-weight: normal;
  padding: 0;
  border-radius: 0;
  background-color: transparent;
  border: none;
}

.feedback-message.correct {
  color: #555;
  background-color: transparent;
  border: none;
}

.feedback-message.incorrect {
  color: #555;
  background-color: transparent;
  border: none;
}

/* Info text */
.info-text {
  margin: 0;
  font-size: 18px;
}

/* ==========================================================================
   19d. Mobile Responsive Adjustments
   Media queries for all Shakespeare components
   ========================================================================== */

@media (max-width: 768px) {
  .shakespeare-modal-overlay {
    padding-top: 30px;
    padding-bottom: 15px;
  }
  
  .shakespeare-container {
    max-width: 90%;
  }
  
  .shakespeare-image {
    width: 150px;
  }
  
  .info-box-container:not([style*="display: none"]) ~ .shakespeare-modal-overlay .shakespeare-container {
    transform: translateY(-100px);
  }
  
  .speech-bubble {
    padding: 20px;
    max-width: 350px;
  }
  
  .response-text,
  .question-text,
  .feedback-message,
  .info-text,
  .farewell-message {
    font-size: 16px;
  }
  
  .choice-button {
    padding: 10px 20px;
    font-size: 15px;
    min-width: 70px;
  }
  
  .button-container {
    gap: 15px;
  }
  
  .info-box-container {
    bottom: 15px;
  }
  
  .info-box {
    padding: 15px 20px;
    max-width: 90%;
  }
  
  .welcome-speech-bubble {
    max-width: 90% !important;
    padding: 20px !important;
  }
  
  .title-cell {
    width: 42px; /* Increased from 35px */
    height: 42px; /* Increased from 35px */
    font-size: 1.2rem; /* Increased from 1rem */
  }
  
  .title-snake-icon {
    font-size: 1.5rem; /* Increased from 1.3rem */
  }
  
  .instructions-container {
    font-size: 18px; /* Increased from 15px */
  }
  
  .farewell-message {
    font-size: 18px; /* Increased from 16px */
  }
}

@media (max-width: 480px) {
  .shakespeare-modal-overlay {
    padding-top: 20px;
    padding-bottom: 10px;
  }
  
  .shakespeare-container {
    max-width: 95%;
  }
  
  .shakespeare-image {
    width: 120px;
  }
  
  .info-box-container:not([style*="display: none"]) ~ .shakespeare-modal-overlay .shakespeare-container {
    transform: translateY(-80px);
  }
  
  .speech-bubble {
    padding: 15px;
    max-width: 280px;
  }
  
  .response-text,
  .question-text,
  .feedback-message,
  .info-text,
  .farewell-message {
    font-size: 15px;
  }
  
  .choice-button {
    padding: 8px 16px;
    font-size: 14px;
    min-width: 60px;
    width: 120px;
  }
  
  .button-container {
    gap: 12px;
    flex-direction: column;
    align-items: center;
  }
  
  .info-box-container {
    bottom: 10px;
  }
  
  .info-box {
    padding: 12px 15px;
  }
  
  .info-box-close {
    width: 20px;
    height: 20px;
    font-size: 16px;
  }
  
  .welcome-speech-bubble {
    padding: 15px !important;
  }
  
  .title-cell {
    width: 36px; /* Increased from 30px */
    height: 36px; /* Increased from 30px */
    font-size: 1.1rem; /* Increased from 0.9rem */
  }
  
  .title-snake-icon {
    font-size: 1.3rem; /* Increased from 1.1rem */
  }
  
  .instructions-container {
    font-size: 17px; /* Increased from 14px */
  }
  
  .farewell-message {
    font-size: 17px; /* Increased from 15px */
  }
}
